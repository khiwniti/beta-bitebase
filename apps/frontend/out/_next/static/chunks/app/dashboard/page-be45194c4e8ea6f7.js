(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5980:function(e,t,a){Promise.resolve().then(a.bind(a,4421))},4421:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var s=a(7437),i=a(2265),r=a(4033),n=a(1050),o=a(4031),c=a(3511),l=a(8053),d=a(2151),p=a(9213);let m=(0,p.Z)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var u=a(4930);let h=(0,p.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var g=a(7946);let y=(0,p.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var x=a(7917);let v=(0,p.Z)("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),b=(0,p.Z)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var f=a(2480),k=a(206);let j=(0,p.Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var w=a(611),N=a(6434),S=a(2406),Z=a(8231),I=a(2254),M=a(4879),A=a(8562),R=a(784);let C={disableTour:()=>{localStorage.setItem("bitebase-tour-completed","true"),localStorage.setItem("bitebase-tour-skipped","true"),console.log("Tour disabled - page will need to be refreshed")},enableTour:()=>{localStorage.removeItem("bitebase-tour-completed"),localStorage.removeItem("bitebase-tour-skipped"),console.log("Tour enabled - page will need to be refreshed")},isTourDisabled:()=>{let e=localStorage.getItem("bitebase-tour-completed"),t=localStorage.getItem("bitebase-tour-skipped");return!!(e||t)},getTourState:()=>({completed:localStorage.getItem("bitebase-tour-completed"),skipped:localStorage.getItem("bitebase-tour-skipped"),disabled:C.isTourDisabled()})};window.tourUtils=C;let T={revenue:{value:125e3,change:12.5,period:"vs last month"},customers:{value:2847,change:8.3,period:"vs last month"},avgOrder:{value:43.85,change:-2.1,period:"vs last month"},satisfaction:{value:4.7,change:.3,period:"vs last month"},footTraffic:{value:1240,change:15.8,period:"vs yesterday"},conversionRate:{value:23.4,change:4.2,period:"vs last week"},marketShare:{value:15.2,change:3.7,period:"vs last quarter"},competitorGap:{value:8.5,change:-2.1,period:"vs last quarter"}},z=[{id:1,action:"New competitor analysis completed",time:"2 hours ago",type:"analysis",icon:o.Z},{id:2,action:"Market report generated for Sukhumvit",time:"4 hours ago",type:"report",icon:c.Z},{id:3,action:"Price optimization recommendations",time:"6 hours ago",type:"optimization",icon:l.Z},{id:4,action:"Customer feedback analysis",time:"8 hours ago",type:"feedback",icon:d.Z},{id:5,action:"Location scout report: Silom area",time:"1 day ago",type:"location",icon:m}],D=[{name:"Bella Vista",distance:"0.3 mi",rating:4.2,priceRange:"$$",marketShare:18.5,trend:"up"},{name:"Green Garden",distance:"0.5 mi",rating:4,priceRange:"$$$",marketShare:14.2,trend:"stable"},{name:"Urban Bites",distance:"0.7 mi",rating:3.8,priceRange:"$",marketShare:12.8,trend:"down"},{name:"Fusion Kitchen",distance:"0.9 mi",rating:4.1,priceRange:"$$",marketShare:11.3,trend:"up"}],L=[{id:1,type:"opportunity",title:"High-Traffic Location Identified",description:"Downtown area shows 40% higher foot traffic during lunch hours",impact:"High",action:"Consider opening a second location",priority:1,icon:u.Z},{id:2,type:"warning",title:"Competitor Price Drop",description:"Main competitor reduced lunch prices by 15%",impact:"Medium",action:"Review pricing strategy",priority:2,icon:h},{id:3,type:"success",title:"Menu Item Performance",description:"New seasonal salad increased sales by 25%",impact:"Medium",action:"Expand seasonal offerings",priority:3,icon:g.Z},{id:4,type:"info",title:"Peak Hours Analysis",description:"Lunch rush extended by 30 minutes on weekdays",impact:"Low",action:"Adjust staffing schedule",priority:4,icon:y}];function E(){let[e,t]=(0,i.useState)(""),[a,p]=(0,i.useState)([]),[u,h]=(0,i.useState)(!1),[g,y]=(0,i.useState)(!0),[E,P]=(0,i.useState)("overview"),{user:$}=(0,S.a)(),O=(0,r.useRouter)();(0,i.useEffect)(()=>{if(!$){O.push("/auth");return}p([{id:"1",message:"Welcome! I'm your BiteBase AI assistant. I can help you with market research, competitor analysis, demographic insights, and location scoring. What would you like to explore today?",isUser:!1,timestamp:new Date().toLocaleTimeString()}]),y(!1),console.log("Dashboard loaded. Tour state:",C.getTourState())},[$,O]);let U=async e=>{try{let t=await fetch("".concat("https://bitebase-ai-agents-production.bitebase.workers.dev","/research"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"Bangkok, Thailand",cuisine_type:"general consultation",additional_context:{message:e,conversation_type:"dashboard_chat"}})});if(t.ok){let e=await t.json();return e.analysis||e.message||"I've analyzed your query and can provide detailed insights. Please let me know what specific aspect you'd like me to focus on."}throw Error("AI service unavailable")}catch(e){return console.error("Error getting AI response:",e),"I'm here to help with your restaurant business intelligence needs! I can provide insights on market opportunities, competitor analysis, demographic data, location scoring, menu optimization, and marketing strategies. What specific area would you like to explore?"}},G=()=>{e.trim()&&(p(t=>[...t,{id:Date.now().toString(),message:e,isUser:!0,timestamp:"Just now"}]),t(""),h(!0),U(e).then(e=>{p(t=>[...t,{id:(Date.now()+1).toString(),message:e,isUser:!1,timestamp:"Just now"}]),h(!1)}).catch(()=>{p(e=>[...e,{id:(Date.now()+1).toString(),message:"Sorry, I'm having trouble connecting to the AI service. Please try again.",isUser:!1,timestamp:"Just now"}]),h(!1)}))},B=e=>{p(t=>[...t,{id:Date.now().toString(),message:e,isUser:!0,timestamp:"Just now"}]),h(!0),U(e).then(e=>{p(t=>[...t,{id:(Date.now()+1).toString(),message:e,isUser:!1,timestamp:"Just now"}]),h(!1)}).catch(()=>{p(e=>[...e,{id:(Date.now()+1).toString(),message:"Sorry, I'm having trouble connecting to the AI service. Please try again.",isUser:!1,timestamp:"Just now"}]),h(!1)})};return g?(0,s.jsx)(Z.Z,{showWelcomeBanner:!1,children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"loading-spinner w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})})}):(0,s.jsxs)(Z.Z,{showWelcomeBanner:!0,children:[!1,(0,s.jsxs)(I.FE,{title:"Market Intelligence Dashboard",description:"Get AI-powered insights for your restaurant business decisions",actions:[{label:"New Analysis",onClick:()=>O.push("/market-analysis"),icon:(0,s.jsx)(x.Z,{className:"w-4 h-4"})},{label:"Generate Report",onClick:()=>O.push("/reports"),variant:"outline",icon:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}],children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(M.i,{title:"Total Revenue",value:"$".concat(T.revenue.value.toLocaleString()),change:{value:T.revenue.change,period:T.revenue.period,type:"increase"},icon:l.Z,variant:"success",description:"Monthly revenue performance"}),(0,s.jsx)(M.i,{title:"Customer Count",value:T.customers.value.toLocaleString(),change:{value:T.customers.change,period:T.customers.period,type:"increase"},icon:d.Z,variant:"default",description:"Active customer base"}),(0,s.jsx)(M.i,{title:"Average Order Value",value:"$".concat(T.avgOrder.value),change:{value:Math.abs(T.avgOrder.change),period:T.avgOrder.period,type:"decrease"},icon:v,variant:"warning",description:"Per-customer spending"}),(0,s.jsx)(M.i,{title:"Customer Satisfaction",value:T.satisfaction.value,change:{value:T.satisfaction.change,period:T.satisfaction.period,type:"increase"},icon:b,variant:"success",description:"Average rating (5.0 scale)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(M.i,{title:"Daily Foot Traffic",value:T.footTraffic.value.toLocaleString(),change:{value:T.footTraffic.change,period:T.footTraffic.period,type:"increase"},icon:f.Z,description:"Peak: 12-2 PM"}),(0,s.jsx)(M.i,{title:"Conversion Rate",value:"".concat(T.conversionRate.value,"%"),change:{value:T.conversionRate.change,period:T.conversionRate.period,type:"increase"},icon:k.Z,description:"Visitors to customers"}),(0,s.jsx)(M.i,{title:"Market Share",value:"".concat(T.marketShare.value,"%"),change:{value:T.marketShare.change,period:T.marketShare.period,type:"increase"},icon:o.Z,description:"Local market position"}),(0,s.jsx)(M.i,{title:"Competitive Gap",value:"".concat(T.competitorGap.value,"%"),change:{value:Math.abs(T.competitorGap.change),period:T.competitorGap.period,type:"decrease"},icon:j,description:"Price advantage"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(I.$k,{title:"AI Market Assistant",description:"Get instant insights about market opportunities, competitors, and demographics",actions:[{label:"Clear Chat",onClick:()=>p([]),variant:"outline"}],children:(0,s.jsxs)("div",{className:"space-y-4","data-tour":"ai-chat",children:[(0,s.jsxs)("div",{className:"h-96 overflow-y-auto space-y-4 p-4 bg-gray-50 rounded-lg",children:[a.map(e=>(0,s.jsx)("div",{className:"flex ".concat(e.isUser?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat(e.isUser?"chat-message-user":"chat-message-bot"),children:[(0,s.jsx)("p",{className:"text-sm",children:e.message}),(0,s.jsx)("p",{className:"text-xs mt-1 ".concat(e.isUser?"text-primary-100":"text-gray-500"),children:e.timestamp})]})},e.id)),u&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-white text-gray-900 border border-gray-200 px-4 py-2 rounded-lg",children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:["Analyze Bangkok market opportunities","Compare competitor pricing","Show demographic insights","Location scoring analysis"].map(e=>(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>B(e),className:"text-xs",children:e},e))}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onKeyPress:e=>"Enter"===e.key&&G(),placeholder:"Ask about market opportunities, competitors, demographics...",className:"form-input-theme flex-1"}),(0,s.jsx)(n.zx,{onClick:G,disabled:!e.trim()||u,className:"btn-primary",children:(0,s.jsx)(w.Z,{className:"w-4 h-4"})})]})]})})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(I.$k,{title:"Quick Actions",description:"Jump to key features",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(n.zx,{onClick:()=>O.push("/market-analysis"),className:"w-full justify-start btn-primary","data-tour":"map-analysis",children:[(0,s.jsx)(m,{className:"w-4 h-4 mr-2"}),"Analyze Location"]}),(0,s.jsxs)(n.zx,{onClick:()=>O.push("/restaurant-setup"),variant:"outline",className:"w-full justify-start","data-tour":"restaurant-setup",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Setup Restaurant"]}),(0,s.jsxs)(n.zx,{onClick:()=>O.push("/reports"),variant:"outline",className:"w-full justify-start","data-tour":"reports",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]})}),(0,s.jsx)(I.$k,{title:"AI Insights",description:"Latest trends and opportunities",children:(0,s.jsx)("div",{className:"space-y-4",children:L.map(e=>{let t=e.icon,a="opportunity"===e.type?"bg-green-50 border-green-200":"warning"===e.type?"bg-amber-50 border-amber-200":"success"===e.type?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200",i="opportunity"===e.type?"text-green-800":"warning"===e.type?"text-amber-800":"success"===e.type?"text-blue-800":"text-gray-800",r="opportunity"===e.type?"text-green-600":"warning"===e.type?"text-amber-600":"success"===e.type?"text-blue-600":"text-gray-600";return(0,s.jsxs)("div",{className:"p-3 rounded-lg border ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(t,{className:"w-4 h-4 mr-2 ".concat(r)}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(i),children:e.title}),(0,s.jsxs)("span",{className:"ml-auto text-xs text-gray-500",children:[e.impact," Impact"]})]}),(0,s.jsx)("p",{className:"text-sm ".concat(i.replace("800","700")),children:e.description}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1 font-medium",children:e.action})]},e.id)})})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[(0,s.jsx)(R.BO,{title:"Revenue Trend",subtitle:"Monthly performance over the last 6 months",chartType:"line",timeRange:"Last 6 months",actions:{onExport:()=>console.log("Export chart"),onRefresh:()=>console.log("Refresh data"),onExpand:()=>console.log("Expand chart")},children:(0,s.jsx)(R.tO,{data:[1,2,3,4,5,6],height:300})}),(0,s.jsx)(R.BO,{title:"Market Share Analysis",subtitle:"Competitive positioning in local market",chartType:"pie",timeRange:"Current quarter",actions:{onExport:()=>console.log("Export chart"),onRefresh:()=>console.log("Refresh data")},children:(0,s.jsx)(R.bS,{data:D,height:300})})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(A.w,{title:"Competitor Analysis",data:D,columns:[{key:"name",title:"Restaurant",sortable:!0},{key:"distance",title:"Distance",sortable:!0},{key:"rating",title:"Rating",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 text-yellow-400 mr-1"}),e]})},{key:"priceRange",title:"Price Range",sortable:!0},{key:"marketShare",title:"Market Share",sortable:!0,render:e=>"".concat(e,"%")},{key:"trend",title:"Trend",render:e=>(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("up"===e?"bg-green-100 text-green-800":"down"===e?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:["up"===e?"↗":"down"===e?"↘":"→"," ",e]})}],searchable:!0,exportable:!0,pagination:!0,pageSize:5})}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(I.$k,{title:"Recent Activity",description:"Latest system activities and updates",children:(0,s.jsx)("div",{className:"space-y-4",children:z.map(e=>{let t=e.icon;return(0,s.jsxs)("div",{className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,s.jsx)(t,{className:"w-4 h-4 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.action}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.time})]}),(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("analysis"===e.type?"bg-blue-100 text-blue-800":"report"===e.type?"bg-green-100 text-green-800":"optimization"===e.type?"bg-purple-100 text-purple-800":"feedback"===e.type?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.type})]},e.id)})})})})]})]})}},7946:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9213).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},611:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9213).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},206:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9213).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])}},function(e){e.O(0,[704,176,91,691,528,424,50,231,37,971,938,744],function(){return e(e.s=5980)}),_N_E=e.O()}]);